"use strict";$(function(){let urlParams=new URLSearchParams(location.search);let id=urlParams.get("teamid");$("#memberInfo").hide();$("#cancelBtn").hide();$("#submitBtn").hide();$("#editMode").hide();$(".errorMsg").hide();$("#regBtn").attr("href","registermember.html?teamid="+id);$("#editBtn").on("click",function(){$("#editBtn").hide();$("#cancelBtn").show();$("#submitBtn").show();$("#memberName").prop("readonly",!1);$("#memberEmail").prop("readonly",!1);$("#contactName").prop("readonly",!1);$("#memberAge").prop("readonly",!1);$("#memberGender").prop("disabled",!1);$("#memberPhone").prop("readonly",!1);$("#editMode").show()});$("#cancelBtn").on("click",function(){$("#editBtn").show();$("#cancelBtn").hide();$("#submitBtn").hide();$("#memberName").prop("readonly",!0);$("#memberEmail").prop("readonly",!0);$("#contactName").prop("readonly",!0);$("#memberAge").prop("readonly",!0);$("#memberGender").prop("disabled",!0);$("#memberPhone").prop("readonly",!0);$("#editMode").hide()});function inputVal(){$(".errorMsg").hide();$(".errorMsg").empty();if($("#memberName").val().trim()==""){$("#memberNameError").text("Member Name required");$("#memberNameError").show();return!1}
if($("#memberEmail").val().trim()==""){$("#memberEmailError").text("Member Email required");$("#memberEmailError").show();return!1}
if($("#contactName").val().trim()==""){$("#contactNameError").text("Contact Name required");$("#contactNameError").show();return!1}
if($("#memberAge").val().trim()==""){$("#memberAgeError").text("Member Age required");$("#memberAgeError").show();return!1}
if($("#memberAge").val().trim()<18){$("#memberAgeError").text("Member Age must be greater than 18");$("#memberAgeError").show();return!1}
if($("#memberPhone").val().trim()==""){$("#memberPhoneError").text("Member Phone Number required");$("#memberPhoneError").show();return!1}}
$("#submitBtn").on("click",sendForm);function sendForm(){let isOk=inputVal();if(isOk==!1){return}else{confirm("Are you sure you want to make these changes?");$.ajax({url:"/api/teams/"+id+"/members",method:"PUT",dataType:"json",data:$("#memberInfo").serialize()});alert("Updated member info!");location.reload()}}
$.getJSON("/api/teams/"+id,function(data){let team=data;for(let i=0;i<team.Members.length;i++){let memInfo=$("<tr><td>"+team.Members[i].MemberName+"</td><td>"+team.Members[i].Email+"</td><td>"+team.Members[i].ContactName+"</td><td>"+team.Members[i].Age+"</td><td>"+team.Members[i].Gender+"</td><td>"+team.Members[i].Phone+"</td><td><a class='btn btn-primary' id='id"+i+"' href='#memberInfo?memberid="+team.Members[i].MemberId+"'>Details</a></td><td><button class='btn btn-danger' id='deleteid"+team.Members[i].MemberId+"'>Delete</button></td></tr>");$("#teamTBody").append(memInfo);$("#deleteid"+team.Members[i].MemberId).on("click",function(){confirm("Are you sure you want to delete this member?");$.ajax({url:"/api/teams/"+id+"/members/"+team.Members[i].MemberId,method:"DELETE",contentType:"application/json",success:function(){alert("Member deleted!");location.reload()}})});$("#id"+i).on("click",function(){$("#memberInfo").show();$("#memberId").val(team.Members[i].MemberId);$("#memberName").val(team.Members[i].MemberName);$("#memberEmail").val(team.Members[i].Email);$("#contactName").val(team.Members[i].ContactName);$("#memberAge").val(team.Members[i].Age);$("#memberGender").val(team.Members[i].Gender);$("#memberPhone").val(team.Members[i].Phone)})}})})